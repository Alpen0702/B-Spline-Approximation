# B-Spline-Approximation
这里是2022秋-应用几何造型基础的课程作业：在代数距离和几何距离下分别拟合B样条曲线，并讨论其区别。<br>
## 项目路线
本项目的基本路线如下：<br>
1.由用户给定B-Spline的参数：h、p、n以及距离模式（algebraic/geometric）。<br>
2.在曲线上计算knots：在曲线的头尾分别重复p+1个相同的knots，而在中间[p,h+1]范围上均匀分布knots。<br>
3.计算给定数据点集D[]在曲线上对应点的参数。这里采用的是centripetal的方法，其参数alpha可以自定义。<br>
4.利用**步骤2、3**的结果，计算出矩阵N、Q，然后计算控制点集P[]。此时这条B-Spline曲线已经确定。<br>
5.对几何距离模式（geometric），用牛顿法寻找给定数据点集D[]到曲线的最近点集，用这些最近点集的参数t[]回代重复**步骤4**，直到曲线不再明显改变。<br>
6.绘制曲线。实时监听用户对给定数据点集D[]的修改，并返回**步骤3**重绘曲线。<br>
## 使用说明
本项目是在Windows10环境下用Visual Studio 2022开发的，主要调用的库包括GL/freeglut.h和GL/freeglut_ext.h。<br>
下载项目zip文件并解压后，打开B-Spline Approximation.sln即可运行。如果运行失败，请联系我获得支持；你也可以在根目录下直接打开B-Spline Approximation.exe来查看项目运行结果，无需自行编译。<br>
运行项目后，命令行会提示用户输入B-Spline的参数h、p、n，分别代表控制顶点数-1、曲线次数（阶数-1）、给定数据点数-1，注意：n > h >= p >= 1 && n < 50 && h < 10。程序会检查输入参数的合法性。完成检查后，用户可以输入0：algebraic或1：geometric以选择不同的距离模式。收到Parameters checked的提示后，按任意键进入图形界面。<br>
在图形界面中，首先会给出均匀分布在半径为0.8的圆上的n+1个给定数据点，以及对应距离模式下生成的控制顶点和样条曲线。用户可以用鼠标左键自由拖拽给定数据点，程序会实时更新对应的控制顶点和样条曲线。另外，程序也提供了鼠标滚轮缩放的功能。<br>
在图形界面中，蓝色的方形是给定数据点，绿色的方形是控制顶点，红色粗线是B样条曲线，橙色圆点是给定数据点在样条曲线上对应参数的点，橙色细线将这些点与对应的给定数据点相连。**需要注意的是，在样条曲线的起点与终点处，蓝色方形、绿色方形与橙色圆点是重合的。这是因为拟合方法确定了首末的给定数据点与控制顶点重合，且与对应参数点也重合。**<br>
## 讨论
有任何问题，欢迎通过llzju@zju.edu.cn联系我。<br><br>
## *Reference*<br>
*矩阵的LU分解：https://blog.csdn.net/qq_40688707/article/details/89256737*<br>
*B样条曲线拟合：https://pages.mtu.edu/~shene/COURSES/cs3621/NOTES/INT-APP/CURVE-APP-global.html*<br>
*迭代法求几何拟合解：***基于迭代最近点的B样条曲线拟合方法研究. 中国图象图形学报. 肖轶军,丁明跃,彭嘉雄. 2000(005)007****<br>
